{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{% block meta_description %}Estudio Rivarossa y Asociados - Excelencia profesional en servicios jurídicos y contables. Soluciones integrales para empresas y particulares.{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}estudio jurídico, contadores, abogados, asesoría legal, servicios profesionales{% endblock %}">
    <meta name="author" content="Estudio Rivarossa y Asociados">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#8C4F9F">

    <!-- Open Graph Tags -->
    <meta property="og:title" content="{% block og_title %}Estudio Rivarossa y Asociados{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Excelencia profesional en servicios jurídicos y contables{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="es_AR">
    <meta property="og:site_name" content="Estudio Rivarossa y Asociados">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block twitter_title %}Estudio Rivarossa y Asociados{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}Excelencia profesional en servicios jurídicos y contables{% endblock %}">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{% static 'img/favicon.png' %}">
    <link rel="apple-touch-icon" href="{% static 'img/favicon.png' %}">

    <title>{% block title %}Estudio Rivarossa y Asociados{% endblock %}</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
          rel="stylesheet">

    <!-- CSS Corporativo - Sistema de Diseño -->
    <link rel="stylesheet" href="{% static 'css/variables.css' %}">
    <link rel="stylesheet" href="{% static 'css/components.css' %}">
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">

    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Skip to main content (Accesibilidad) -->
    <a href="#main-content" class="skip-to-main">Ir al contenido principal</a>

    <!-- Navbar -->
    {% if user.is_authenticated %}
    <nav class="navbar-studio">
        <div class="navbar-studio-container">
            <!-- Brand -->
            <a class="navbar-studio-brand" href="{% url 'home' %}">
                <img src="{% static 'img/logo.png' %}" alt="Estudio Rivarossa Logo" class="navbar-studio-logo" onerror="this.style.display='none'">
                <span>Estudio Rivarossa</span>
            </a>

            <!-- Menu -->
            <nav class="navbar-studio-menu d-none d-lg-flex">
                <a href="{% url 'home' %}" class="nav-studio-item {% if request.resolver_match.url_name == 'home' %}active{% endif %}">
                    <i class="bi bi-speedometer2"></i> Dashboard
                </a>
                {% if user.rol == 'Administrador' %}
                <a href="/admin/" class="nav-studio-item">
                    <i class="bi bi-gear"></i> Administración
                </a>
                {% endif %}
            </nav>

            <!-- Actions -->
            <div class="navbar-studio-actions">
                <!-- Dark Mode Toggle -->
                <button type="button" class="theme-toggle" aria-label="Cambiar tema">
                    <i class="bi bi-moon-stars-fill"></i>
                </button>

                <!-- User Menu -->
                <div class="dropdown">
                    <button class="btn-studio-ghost dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle"></i>
                        <span class="d-none d-md-inline">{{ user.get_full_name }}</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li>
                            <span class="dropdown-item-text">
                                <small class="text-muted d-block">{{ user.email }}</small>
                                <span class="badge-studio badge-studio-purple mt-1">{{ user.rol }}</span>
                            </span>
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <a class="dropdown-item {% if request.resolver_match.url_name == 'perfil' %}active{% endif %}" href="{% url 'perfil' %}">
                                <i class="bi bi-person"></i> Mi Perfil
                            </a>
                        </li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <a class="dropdown-item text-danger" href="{% url 'logout' %}">
                                <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    {% else %}
    <!-- Navbar para usuarios no autenticados -->
    <nav class="navbar-studio">
        <div class="navbar-studio-container">
            <a class="navbar-studio-brand" href="{% url 'home' %}">
                <img src="{% static 'img/logo.png' %}" alt="Estudio Rivarossa Logo" class="navbar-studio-logo" onerror="this.style.display='none'">
                <span>Estudio Rivarossa</span>
            </a>

            <nav class="navbar-studio-menu d-none d-lg-flex">
                <a href="{% url 'home' %}" class="nav-studio-item">Inicio</a>
                <a href="#servicios" class="nav-studio-item">Servicios</a>
                <a href="#nosotros" class="nav-studio-item">Nosotros</a>
                <a href="#contacto" class="nav-studio-item">Contacto</a>
            </nav>

            <div class="navbar-studio-actions">
                <button type="button" class="theme-toggle" aria-label="Cambiar tema">
                    <i class="bi bi-moon-stars-fill"></i>
                </button>
                <a href="{% url 'login' %}" class="btn-studio-secondary">
                    <i class="bi bi-box-arrow-in-right"></i> Ingresar
                </a>
            </div>
        </div>
    </nav>
    {% endif %}

    <!-- Mensajes de Django -->
    {% if messages %}
    <div class="container-studio mt-3">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            <i class="bi 
                {% if message.tags == 'success' %}bi-check-circle-fill
                {% elif message.tags == 'error' or message.tags == 'danger' %}bi-exclamation-triangle-fill
                {% elif message.tags == 'warning' %}bi-exclamation-circle-fill
                {% else %}bi-info-circle-fill{% endif %} me-2"></i>
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Main Content -->
    <main id="main-content">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer-studio">
        <div class="footer-studio-container">
            <div class="footer-studio-grid">
                <!-- Acerca de -->
                <div>
                    <h3 class="footer-studio-section-title">Estudio Rivarossa y Asociados</h3>
                    <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: var(--spacing-md);">
                        Excelencia profesional en servicios jurídicos y contables. 
                        Más de {{ años_experiencia|default:"20" }} años de trayectoria.
                    </p>
                    <div style="display: flex; gap: var(--spacing-md);">
                        <a href="#" class="btn-studio-icon btn-studio-secondary" aria-label="LinkedIn">
                            <i class="bi bi-linkedin"></i>
                        </a>
                        <a href="#" class="btn-studio-icon btn-studio-secondary" aria-label="Facebook">
                            <i class="bi bi-facebook"></i>
                        </a>
                        <a href="#" class="btn-studio-icon btn-studio-secondary" aria-label="Instagram">
                            <i class="bi bi-instagram"></i>
                        </a>
                    </div>
                </div>

                <!-- Enlaces Rápidos -->
                <div>
                    <h3 class="footer-studio-section-title">Enlaces Rápidos</h3>
                    <ul class="footer-studio-links">
                        <li><a href="{% url 'home' %}" class="footer-studio-link">Inicio</a></li>
                        <li><a href="#servicios" class="footer-studio-link">Servicios</a></li>
                        <li><a href="#nosotros" class="footer-studio-link">Nosotros</a></li>
                        <li><a href="#contacto" class="footer-studio-link">Contacto</a></li>
                    </ul>
                </div>

                <!-- Servicios -->
                <div>
                    <h3 class="footer-studio-section-title">Servicios</h3>
                    <ul class="footer-studio-links">
                        <li><a href="#" class="footer-studio-link">Asesoría Legal</a></li>
                        <li><a href="#" class="footer-studio-link">Contabilidad</a></li>
                        <li><a href="#" class="footer-studio-link">Auditoría</a></li>
                        <li><a href="#" class="footer-studio-link">Consultoría</a></li>
                    </ul>
                </div>

                <!-- Contacto -->
                <div>
                    <h3 class="footer-studio-section-title">Contacto</h3>
                    <ul class="footer-studio-links">
                        <li style="color: rgba(255, 255, 255, 0.8); padding: var(--spacing-xs) 0;">
                            <i class="bi bi-geo-alt me-2"></i> Buenos Aires, Argentina
                        </li>
                        <li style="color: rgba(255, 255, 255, 0.8); padding: var(--spacing-xs) 0;">
                            <i class="bi bi-envelope me-2"></i> info@estudiorivarossa.com
                        </li>
                        <li style="color: rgba(255, 255, 255, 0.8); padding: var(--spacing-xs) 0;">
                            <i class="bi bi-telephone me-2"></i> +54 11 xxxx-xxxx
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Footer Bottom -->
            <div class="footer-studio-bottom">
                <p>&copy; {% now "Y" %} Estudio Rivarossa y Asociados. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>

    <!-- JavaScript Principal -->
    <script src="{% static 'js/main.js' %}"></script>

    {% block extra_js %}{% endblock %}
</body>
</html>
